
<!DOCTYPE html>
<html>

  <head>
  <meta http-equiv="refresh" content="0; url=https://developers.yubico.com/python-u2flib-server">
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-6195355-4', 'yubico.com');
  ga('send', 'pageview');

</script>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="Python U2Flib Server : Python based U2F server library" />

    <link rel="stylesheet" type="text/css" media="screen" href="/stylesheets/stylesheet.css">

    <title>Python U2Flib Server</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
        <span class="breadcrumb">
          <a href="/">Software listing</a>
          /
          <a>Python U2Flib Server</a>
          </span>
          <a id="forkme_banner" href="https://github.com/Yubico/python-u2flib-server">View on GitHub</a>

          <h1><a id="project_title" href="/python-u2flib-server/">Python U2Flib Server</a></h1>
          <h2 id="project_tagline">Python based U2F server library</h2>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
      <ul>
	
	
        <li><a href="releases.html">Releases</a></li>
      </ul>

<div class="sect1">
<h2 id="_u2flib_server">u2flib-server</h2>
<div class="sectionbody">
<div class="paragraph"><p>Provides functionality for working with the server side aspects of the U2F
protocol as defined in the FIDO
specifications, available here: <a href="http://fidoalliance.org/specifications/download">http://fidoalliance.org/specifications/download</a></p></div>
<div class="sect2">
<h3 id="_license">License</h3>
<div class="paragraph"><p>This program is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.</p></div>
<div class="paragraph"><p>This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.</p></div>
</div>
<div class="sect2">
<h3 id="_dependencies">Dependencies</h3>
<div class="paragraph"><p>u2flib-host depends on M2Crypto. On a Ubuntu system, this can be installed with
the following command:</p></div>
<div class="literalblock">
<div class="content">
<pre><code>$ apt-get install python-m2crypto</code></pre>
</div></div>
</div>
<div class="sect2">
<h3 id="_installation">Installation</h3>
<div class="paragraph"><p>u2flib-host is installable by running the following command:</p></div>
<div class="literalblock">
<div class="content">
<pre><code>$ python setup.py install</code></pre>
</div></div>
</div>
<div class="sect2">
<h3 id="_example">Example</h3>
<div class="paragraph"><p>See examples/u2f_server.py for a working example of a HTTP server for
U2F enrollment and authentication. u2f_server.py can be run as a stand-alone
server, and can be used to test a U2F client implementation, such as
python-u2flib-host, using for example cURL.</p></div>
<div class="paragraph"><p>The examples below show cURL command to register a U2F device, and to
authenticate it.</p></div>
<div class="sect3">
<h4 id="_registration">Registration</h4>
<div class="paragraph"><p>Registration is initiated by sending a request to the server:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>$ curl http://localhost:8081/enroll
{"challenge": "D2pzTPZa7bq69ABuiGQILo9zcsTURP26RLifTyCkilc", "version": "U2F_V2", "appId": "http://localhost:8081"}</code></pre>
</div></div>
<div class="paragraph"><p>The RegisterRequest data is then fed to the U2F client, resulting in the
RegisterResponse data, which is passed back to the server:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>$ curl http://localhost:8081/bind -d'data={"clientData": "eyJvcmlnaW4iOiAiaHR0cDovL2xvY2FsaG9zdDo4MDgxIiwgImNoYWxsZW5nZSI6ICJEMnB6VFBaYTdicTY5QUJ1aUdRSUxvOXpjc1RVUlAyNlJMaWZUeUNraWxjIiwgInR5cCI6ICJuYXZpZ2F0b3IuaWQuZmluaXNoRW5yb2xsbWVudCJ9", "registrationData": "BQSivQtJ6-lAgZ2qQ0aUGLEiJSRoLWUSGcmMO8C-GuibA0-xTvmuQfTqKyFJZWOUjGzEIgF4xV6gJ6itcagsyuUWQEQh9noDSu-WtzTOMhK_lKHxwHtQgJHCkzs4mukfpf310K5Dq9k6zBNtZ2RMBWgJhI7hJo4JiFn3k2GUNLwKZpwwggGHMIIBLqADAgECAgkAmb7osQyi7BwwCQYHKoZIzj0EATAhMR8wHQYDVQQDDBZZdWJpY28gVTJGIFNvZnQgRGV2aWNlMB4XDTEzMDcxNzE0MjEwM1oXDTE2MDcxNjE0MjEwM1owITEfMB0GA1UEAwwWWXViaWNvIFUyRiBTb2Z0IERldmljZTBZMBMGByqGSM49AgEGCCqGSM49AwEHA0IABDvhl91zfpg9n7DeCedcQ8gGXUnemiXoi-JEAxz-EIhkVsMPAyzhtJZ4V3CqMZ-MOUgICt2aMxacMX9cIa8dgS2jUDBOMB0GA1UdDgQWBBQNqL-TV04iaO6mS5tjGE6ShfexnjAfBgNVHSMEGDAWgBQNqL-TV04iaO6mS5tjGE6ShfexnjAMBgNVHRMEBTADAQH_MAkGByqGSM49BAEDSAAwRQIgXJWZdbvOWdhVaG7IJtn44o21Kmi8EHsDk4cAfnZ0r38CIQD6ZPi3Pl4lXxbY7BXFyrpkiOvCpdyNdLLYbSTbvIBQOTBFAiEA1uwJKNez6_BHdA2d-DPmRFJj19biYNkhN86SFH5Z_lYCICld2L3ZAVsm_uNFRt13_N9dlhGu50pb1ql8-_3_p5v1"}'
true</code></pre>
</div></div>
<div class="paragraph"><p>The result, "true", indicates that registration was successful.</p></div>
</div>
<div class="sect3">
<h4 id="_authentication">Authentication</h4>
<div class="paragraph"><p>Authentication for a previously registered U2F device is done by sending a
request to the server:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>$ curl http://localhost:8081/sign
{"keyHandle": "RCH2egNK75a3NM4yEr-UofHAe1CAkcKTOzia6R-l_fXQrkOr2TrME21nZEwFaAmEjuEmjgmIWfeTYZQ0vApmnA", "challenge": "Ql05duFdQj6oc_mZf1Lt08PyXWJJxN5xe2SagdUGCxo", "version": "U2F_V2", "appId": "http://localhost:8081/app-identity"}</code></pre>
</div></div>
<div class="paragraph"><p>The AuthenticateRequest data is then fed to the U2F client, resulting in an
AuthenticateResponse object which is passed back to the server:</p></div>
<div class="listingblock">
<div class="content">
<pre><code>$ curl http://localhost:8081/verify -d'data={"clientData": "eyJvcmlHR0cDovL2xvY2FsaG9zdDo4MDgxIiwgImNoYWxsZW5nZSI6ICJlNGtScWk3eTdmUHdtZGZ1RnJ5WkxyVUhYby1BdF91YUFwWHdxdkV2UmxzIiwgInR5cCI6ICJuYXZpZ2F0b3IuaWQuZ2V0QXNzZXJ0aW9uIn0", "challenge": "e4kRqi7y7fPwmdfuFryZLrUHXo-At_uaApXwqvEvRls", "keyHandle": "RCH2egNK75a3NM4yEr-UofHAe1CAkcKTOzia6R-l_fXQrkOr2TrME21nZEwFaAmEjuEmjgmIWfeTYZQ0vApmnA", "signatureData": "AQAAAAIwRQIhAIyr0y4xg-pI8NhAUHJmaluGXwZ7yd5i0e7FQE4l9OaEAiB68JP-df7ro8ohxCcgyxfRiKrsY1J67kLcEuYb0MCrDg"}'
{"touch": "\u0001", "counter": 2}</code></pre>
</div></div>
<div class="paragraph"><p>The response indicates success, giving the U2F devices internal counter value,
as well as the value of the user presence parameter.</p></div>
</div>
</div>
</div>
</div>

</section>
</div>

<!-- FOOTER  -->
<div id="footer_wrap" class="outer">
<footer class="inner">
<p class="copyright">Python U2Flib Server maintained by <a href="https://github.com/Yubico">Yubico</a></p>
</footer>
</div></body></html>
