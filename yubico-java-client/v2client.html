<!DOCTYPE html>
<html>

  <head>
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-6195355-4', 'yubico.com');
  ga('send', 'pageview');

</script>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="yubico-java-client : Client library written in Java for verifying Yubikey one-time passwords (OTPs)." />

    <link rel="stylesheet" type="text/css" media="screen" href="/stylesheets/stylesheet.css">

    <title>yubico-java-client</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
        <span class="breadcrumb">
          <a href="/">Software listing</a>
          /
          <a href="/yubico-java-client/">yubico-java-client</a>
          /
          <a>v2client</a>
          </span>
          <a id="forkme_banner" href="https://github.com/Yubico/yubico-java-client">View on GitHub</a>
<a id="travis_link" href="https://travis-ci.org/Yubico/yubico-java-client"><img id="travis_img" src="https://travis-ci.org/Yubico/yubico-java-client.svg?branch=master"/></a>
          <h1><a id="project_title" href="/yubico-java-client/">yubico-java-client</a></h1>
          <h2 id="project_tagline">Client library written in Java for verifying Yubikey one-time passwords (OTPs).</h2>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
<div class="paragraph"><p>A validation client for use with the Yubico validation API (version 2).
By default, it uses the Yubico YubiCloud validation platform, but can
be configured for another validation server. To use YubiCloud you need a
client ID and an API key that can be fetched from <a href="https://upgrade.yubico.com/getapikey">https://upgrade.yubico.com/getapikey</a>.</p></div>
<div class="sect1">
<h2 id="_usage">Usage</h2>
<div class="sectionbody">
<div class="paragraph"><p>Add this to your pom.xml:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.7
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-weight: bold"><span style="color: #0000FF">&lt;dependency&gt;</span></span>
  <span style="font-weight: bold"><span style="color: #0000FF">&lt;groupId&gt;</span></span>com.yubico<span style="font-weight: bold"><span style="color: #0000FF">&lt;/groupId&gt;</span></span>
  <span style="font-weight: bold"><span style="color: #0000FF">&lt;artifactId&gt;</span></span>yubico-validation-client2<span style="font-weight: bold"><span style="color: #0000FF">&lt;/artifactId&gt;</span></span>
  <span style="font-weight: bold"><span style="color: #0000FF">&lt;version&gt;</span></span>2.0.1<span style="font-weight: bold"><span style="color: #0000FF">&lt;/version&gt;</span></span>
<span style="font-weight: bold"><span style="color: #0000FF">&lt;/dependency&gt;</span></span></tt></pre></div></div>
<div class="paragraph"><p>A simple implementation would be:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.7
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900">// otp is the OTP from the Yubikey</span></span>
<span style="font-style: italic"><span style="color: #9A1900">// clientId is the client ID from https://upgrade.yubico.com/getapikey/</span></span>
<span style="color: #009900">boolean</span> <span style="font-weight: bold"><span style="color: #000000">validate</span></span><span style="color: #990000">(</span><span style="color: #008080">String</span> otp<span style="color: #990000">,</span> <span style="color: #009900">int</span> clientId<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
   <span style="color: #008080">YubicoClient</span> client <span style="color: #990000">=</span> YubicoClient<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">getClient</span></span><span style="color: #990000">(</span>clientId<span style="color: #990000">);</span>
   <span style="color: #008080">YubicoResponse</span> response <span style="color: #990000">=</span> client<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">verify</span></span><span style="color: #990000">(</span>otp<span style="color: #990000">);</span>
   <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> response<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">getStatus</span></span><span style="color: #990000">()</span> <span style="color: #990000">==</span> YubicoResponseStatus<span style="color: #990000">.</span>OK<span style="color: #990000">;</span>
<span style="color: #FF0000">}</span></tt></pre></div></div>
<div class="paragraph"><p>After validating the OTP you should make sure that the publicId part belongs to
the correct user. For example:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.7
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>YubicoClient<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">getPublicId</span></span><span style="color: #990000">(</span>otp<span style="color: #990000">)</span>
    <span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">equals</span></span><span style="color: #990000">(</span><span style="font-style: italic"><span style="color: #9A1900">/* Yubikey ID associated with the user */</span></span><span style="color: #990000">);</span></tt></pre></div></div>
<div class="paragraph"><p>Read more about this <a href="https://github.com/Yubico/yubikey-val/wiki/GettingStartedWritingClients#binding-an-otp-to-an-identity">here</a>.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_logging">Logging</h2>
<div class="sectionbody">
<div class="paragraph"><p>The validation client depends on slf4j-api for logging. To get the actual logs
and not receive warnings on System.out you will need to depend on a slf4j logger
binding, for example slf4j-log4j with the following maven configuration:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.7
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-weight: bold"><span style="color: #0000FF">&lt;dependency&gt;</span></span>
 <span style="font-weight: bold"><span style="color: #0000FF">&lt;groupId&gt;</span></span>org.slf4j<span style="font-weight: bold"><span style="color: #0000FF">&lt;/groupId&gt;</span></span>
 <span style="font-weight: bold"><span style="color: #0000FF">&lt;artifactId&gt;</span></span>slf4j-log4j<span style="font-weight: bold"><span style="color: #0000FF">&lt;/artifactId&gt;</span></span>
 <span style="font-weight: bold"><span style="color: #0000FF">&lt;version&gt;</span></span>1.6.1<span style="font-weight: bold"><span style="color: #0000FF">&lt;/version&gt;</span></span>
<span style="font-weight: bold"><span style="color: #0000FF">&lt;/dependency&gt;</span></span></tt></pre></div></div>
</div>
</div>
<div class="sect1">
<h2 id="_read_more">Read more</h2>
<div class="sectionbody">
<div class="paragraph"><p>For more complete descriptions of methods and failure states, please see
the javadoc.</p></div>
</div>
</div>

</section>
</div>

<!-- FOOTER  -->
<div id="footer_wrap" class="outer">
<footer class="inner">
<p class="copyright">yubico-java-client maintained by <a href="https://github.com/Yubico">Yubico</a></p>
<p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
</footer>
</div></body></html>
