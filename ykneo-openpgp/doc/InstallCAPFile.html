<!DOCTYPE html>
<html>

  <head>
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-6195355-4', 'yubico.com');
  ga('send', 'pageview');

</script>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="ykneo-openpgp : OpenPGP app for the YubiKey NEO" />

    <link rel="stylesheet" type="text/css" media="screen" href="/stylesheets/stylesheet.css">

    <title>ykneo-openpgp</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
        <span class="breadcrumb">
          <a href="/">Software listing</a>
          /
          <a href="/ykneo-openpgp/">ykneo-openpgp</a>
          /
          <a>InstallCAPFile</a>
          </span>
          <a id="forkme_banner" href="https://github.com/Yubico/ykneo-openpgp">View on GitHub</a>
<a id="travis_link" href="https://travis-ci.org/Yubico/ykneo-openpgp"><img id="travis_img" src="https://travis-ci.org/Yubico/ykneo-openpgp.svg?branch=master"/></a>
          <h1><a id="project_title" href="/ykneo-openpgp/">ykneo-openpgp</a></h1>
          <h2 id="project_tagline">OpenPGP app for the YubiKey NEO</h2>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
<div class="sect1">
<h2 id="_installing_cap_file_on_yubikey_neo">Installing CAP file on YubiKey NEO</h2>
<div class="sectionbody">
<div class="paragraph"><p>After building the CAP file you can install it on a NEO.  You need to
have a NEO with default card manager keys, or know the card manager
keys.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_enable_ccid_mode_on_the_neo">Enable CCID mode on the NEO</h2>
<div class="sectionbody">
<div class="paragraph"><p>First make sure the YubiKey NEO is in the HID/CCID or CCID mode.  You
may use the YubiKey NEO Manager GUI:
<a href="https://developers.yubico.com/yubikey-neo-manager/">https://developers.yubico.com/yubikey-neo-manager/</a></p></div>
<div class="paragraph"><p>If you prefer command line tools, you may use the <em>ykpers</em> and
<em>ykneomgr</em> tools depending on which mode the YubiKey NEO is in.  See:
<a href="https://developers.yubico.com/yubikey-personalization/">https://developers.yubico.com/yubikey-personalization/</a>
<a href="https://developers.yubico.com/libykneomgr/">https://developers.yubico.com/libykneomgr/</a></p></div>
<div class="paragraph"><p>Refer to the documentation of these projects on how to mode switch the
YubiKey NEO.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_installing_cap_file_to_neo">Installing CAP file to NEO</h2>
<div class="sectionbody">
<div class="paragraph"><p>Install the gpshell tool from Global Platform:
<a href="http://sourceforge.net/projects/globalplatform/">http://sourceforge.net/projects/globalplatform/</a></p></div>
<div class="paragraph"><p>We have tested the combination of GlobalPlatform Library version
6.0.0, GPShell version 1.4.4, and gppcscconnectionplugin version
1.1.0.</p></div>
<div class="paragraph"><p>You need to whitelist the device in /etc/libccid_Info.plist which
happens automatically if you have a recent libccid.</p></div>
<div class="paragraph"><p>WARNING!  When you load a new CAP file, everything on the device for
that app is erased.  Keep a backup of your credentials.</p></div>
<div class="paragraph"><p>When the CAP file has been built and is available in the default path,
you may use the gpshell tool to load it:</p></div>
<div class="literalblock">
<div class="content">
<pre><code>$ gpshell gpinstall.txt</code></pre>
</div></div>
<div class="paragraph"><p>You can modify the gpinstall.txt file if you have other card manager
keys.  To set a proper OpenPGP card serial number you need to use the
parameter -instAID so in gpinstall.txt replace this line:</p></div>
<div class="paragraph"><p>&#8230;
install -file ./applet/bin/openpgpcard/javacard/openpgpcard.cap -instParam 00 -priv 00
&#8230;</p></div>
<div class="paragraph"><p>with the following after replacing xxxxxxxx with the serial number you
want.  Note that YubiKey NEOs have decimal serial numbers.  You can
convert that into hex and put it in the Application ID.  However,
GnuPG will sometimes query you to insert "Card xxxxxxxx" and if you
used xxxxxxxx as the hex representation of your decimal serial number,
it may be difficult locating the right NEO (if you have multiple).
Thus, we recommend to store the serial number in BCD code so if your
YubiKey NEO has serial number 4711 you would use xxxxxxxx=00004711.</p></div>
<div class="paragraph"><p>&#8230;
install -instAID -instAID D2760001240102000006xxxxxxxx0000 file ./applet/bin/openpgpcard/javacard/openpgpcard.cap -instParam 00 -priv 00
&#8230;</p></div>
<div class="paragraph"><p>That&#8217;s it!</p></div>
</div>
</div>

</section>
</div>

<!-- FOOTER  -->
<div id="footer_wrap" class="outer">
<footer class="inner">
<p class="copyright">ykneo-openpgp maintained by <a href="https://github.com/Yubico">Yubico</a></p>
</footer>
</div></body></html>
