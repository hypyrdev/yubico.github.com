
<!DOCTYPE html>
<html>

  <head>
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-6195355-4', 'yubico.com');
  ga('send', 'pageview');

</script>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="Python U2Flib Host : Python based U2F host library" />

    <link rel="stylesheet" type="text/css" media="screen" href="/stylesheets/stylesheet.css">

    <title>Python U2Flib Host</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
        <span class="breadcrumb">
          <a href="/">Software listing</a>
          /
          <a>Python U2Flib Host</a>
          </span>
          <a id="forkme_banner" href="https://github.com/Yubico/python-u2flib-host">View on GitHub</a>

          <h1><a id="project_title" href="/python-u2flib-host/">Python U2Flib Host</a></h1>
          <h2 id="project_tagline">Python based U2F host library</h2>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
      <ul>
	
	
        <li><a href="releases.html">Releases</a></li>
      </ul>

<div class="sect1">
<h2 id="_u2flib_host">u2flib-host</h2>
<div class="sectionbody">
<div class="paragraph"><p>Provides library functionality for communicating with a U2F device over USB.</p></div>
<div class="paragraph"><p>Two executables are provided, u2f-register and u2f-authenticate, which support
the register and authenticated commands of U2F as defined in the FIDO
specifications, available here: <a href="http://fidoalliance.org/specifications/download">http://fidoalliance.org/specifications/download</a></p></div>
<div class="sect2">
<h3 id="_license">License</h3>
<div class="paragraph"><p>This program is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.</p></div>
<div class="paragraph"><p>This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.</p></div>
</div>
<div class="sect2">
<h3 id="_installation">Installation</h3>
<div class="paragraph"><p>u2flib-host is installable by running the following command:</p></div>
<div class="literalblock">
<div class="content">
<pre><code># python setup.py install</code></pre>
</div></div>
<div class="paragraph"><p>Under Linux you will need to add a Udev rule to be able to access the U2F
device, or run as root. For example, the Udev rule may contain the following:</p></div>
<div class="paragraph"><p>#Udev rule for allowing HID access to Yubico devices for U2F support.</p></div>
<div class="paragraph"><p>KERNEL=="hidraw*", SUBSYSTEM=="hidraw", \</p></div>
</div>
<div class="sect2">
<h3 id="_dependencies">Dependencies</h3>
<div class="paragraph"><p>To support HID devices, u2flib-host uses hidapi, which has a few dependencies
for building. On a Debian based system, run the following command before
installation (python setup.py install):</p></div>
<div class="literalblock">
<div class="content">
<pre><code># apt-get install build-essential python-dev cython libusb-1.0-0-dev \
  libudev-dev</code></pre>
</div></div>
<div class="paragraph"><p>The soft U2F device implementation requires M2Crypto. On Debian based systems
it is easiest installed using:</p></div>
<div class="literalblock">
<div class="content">
<pre><code># apt-get-install python-m2crypto</code></pre>
</div></div>
</div>
<div class="sect2">
<h3 id="_examples">Examples</h3>
<div class="sect3">
<h4 id="_library_use">Library use</h4>
<div class="listingblock">
<div class="content">
<pre><code>from u2flib_host import u2f, exc

# Enumerate available devices
devices = u2f.list_devices()

for device in devices:
    # The with block ensures that the device is opened and closed.
    with device as dev:
        # Register the device with some service
        registrationResponse = u2f.register(device, registrationRequest, facet)</code></pre>
</div></div>
</div>
<div class="sect3">
<h4 id="_executable_use">Executable use</h4>
<div class="paragraph"><p>The examples below use the soft U2F device to register and authenticate against
the u2f_server example server from the python-u2flib-server project. See that
project for more details.
The register step will create a new U2F key pair and store the credential in
the soft_device.json file. The authenticate step will use this credential to
sign a challenge given by the server.</p></div>
<div class="sect4">
<h5 id="_registration">Registration</h5>
<div class="paragraph"><p>The u2f-register command takes a RegisterRequest JSON object as input,
registering the attached device and returns the registration response as
output.</p></div>
<div class="listingblock">
<div class="content">
<pre><code>$ u2f-register -s soft_device.json http://localhost:8081
Enter RegisterRequest JSON data...
{"challenge": "K0aDxsacDNqrzlaGyLZoFYbXvCJcdIhq0SSaMz-lsV4", "version": "U2F_V2", "appId": "http://localhost:8081"}

Touch the U2F device you wish to register...
[{"clientData": "eyJvcmlnaW4iOiAiaHR0cDovL2xvY2FsaG9zdDo4MDgxIiwgImNoYWxsZW5nZSI6ICJLMGFEeHNhY0ROcXJ6bGFHeUxab0ZZYlh2Q0pjZElocTBTU2FNei1sc1Y0IiwgInR5cCI6ICJuYXZpZ2F0b3IuaWQuZmluaXNoRW5yb2xsbWVudCJ9", "registrationData": "BQTGnJVILHhzuTKg2XClCM5TJjF2WeK4fp9i6fj3VywzOk3d-O1sNaapAUPh-1GxoVCMY6s_jimP-nKqnZT-MGOCQIGD9Hs4qBCXMbfOPfzuB5zhFcOD95ddve67HXV8QeyPDKPZS5zDogvWyl8l4Tv2XRWGo4_6cAPPM4dPZcMreagwggGHMIIBLqADAgECAgkAmb7osQyi7BwwCQYHKoZIzj0EATAhMR8wHQYDVQQDDBZZdWJpY28gVTJGIFNvZnQgRGV2aWNlMB4XDTEzMDcxNzE0MjEwM1oXDTE2MDcxNjE0MjEwM1owITEfMB0GA1UEAwwWWXViaWNvIFUyRiBTb2Z0IERldmljZTBZMBMGByqGSM49AgEGCCqGSM49AwEHA0IABDvhl91zfpg9n7DeCedcQ8gGXUnemiXoi-JEAxz-EIhkVsMPAyzhtJZ4V3CqMZ-MOUgICt2aMxacMX9cIa8dgS2jUDBOMB0GA1UdDgQWBBQNqL-TV04iaO6mS5tjGE6ShfexnjAfBgNVHSMEGDAWgBQNqL-TV04iaO6mS5tjGE6ShfexnjAMBgNVHRMEBTADAQH_MAkGByqGSM49BAEDSAAwRQIgXJWZdbvOWdhVaG7IJtn44o21Kmi8EHsDk4cAfnZ0r38CIQD6ZPi3Pl4lXxbY7BXFyrpkiOvCpdyNdLLYbSTbvIBQOTBEAiBk3N3-gH2WPhR7EOq2-vEqrC1EZXgYs7fofhYTNk9jqwIgcAVRCeXfCLfLO7X71vKVeXaRQKCJgvmRZdB8PoPVdjw"}]</code></pre>
</div></div>
</div>
<div class="sect4">
<h5 id="_authentication">Authentication</h5>
<div class="paragraph"><p>The u2f-authenticate command takes an AuthenticateRequest JSON object as
input, and returns the AuthenticateResponse as output.</p></div>
<div class="listingblock">
<div class="content">
<pre><code>$ u2f-authenticate -s soft_device.json http://localhost:8081
Enter AuthenticateRequest JSON data...
{"keyHandle": "gYP0ezioEJcxt849_O4HnOEVw4P3l1297rsddXxB7I8Mo9lLnMOiC9bKXyXhO_ZdFYajj_pwA88zh09lwyt5qA", "challenge": "zCfLJtWyaCk86Awi5VFtT7hhLk5yncYppYC0z2Q5xxo", "version": "U2F_V2", "appId": "http://localhost:8081"}

{"clientData": "eyJvcmlnaW4iOiAiaHR0cDovL2xvY2FsaG9zdDo4MDgxIiwgImNoYWxsZW5nZSI6ICJ6Q2ZMSnRXeWFDazg2QXdpNVZGdFQ3aGhMazV5bmNZcHBZQzB6MlE1eHhvIiwgInR5cCI6ICJuYXZpZ2F0b3IuaWQuZ2V0QXNzZXJ0aW9uIn0", "challenge": "zCfLJtWyaCk86Awi5VFtT7hhLk5yncYppYC0z2Q5xxo", "keyHandle": "gYP0ezioEJcxt849_O4HnOEVw4P3l1297rsddXxB7I8Mo9lLnMOiC9bKXyXhO_ZdFYajj_pwA88zh09lwyt5qA", "signatureData": "AQAAAAEwRAIgK8HLGu8SQNPC3hI1700RsTtyXLlsn9_1sEcIcobhDi0CIFzduJ5IdGus-I-ieHTX1R-1xRCA0e29I9kChKbkkIzF"}</code></pre>
</div></div>
</div>
</div>
</div>
</div>
</div>

</section>
</div>

<!-- FOOTER  -->
<div id="footer_wrap" class="outer">
<footer class="inner">
<p class="copyright">Python U2Flib Host maintained by <a href="https://github.com/Yubico">Yubico</a></p>
</footer>
</div></body></html>
