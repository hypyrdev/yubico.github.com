
<!DOCTYPE html>
<html>

  <head>
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-6195355-4', 'yubico.com');
  ga('send', 'pageview');

</script>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="libu2f-host : Yubico Universal 2nd Factor (U2F) Host C Library" />

    <link rel="stylesheet" type="text/css" media="screen" href="/stylesheets/stylesheet.css">

    <title>libu2f-host</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
        <span class="breadcrumb">
          <a href="/">Software listing</a>
          /
          <a>libu2f-host</a>
          </span>
          <a id="forkme_banner" href="https://github.com/Yubico/libu2f-host">View on GitHub</a>
<a id="travis_link" href="https://travis-ci.org/Yubico/libu2f-host"><img id="travis_img" src="https://travis-ci.org/Yubico/libu2f-host.svg?branch=master"/></a>
          <h1><a id="project_title" href="/libu2f-host/">libu2f-host</a></h1>
          <h2 id="project_tagline">Yubico Universal 2nd Factor (U2F) Host C Library</h2>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
      <ul>
	
	
        <li><a href="releases.html">Releases</a></li>
      </ul>

<div class="sect1">
<h2 id="_introduction">Introduction</h2>
<div class="sectionbody">
<div class="paragraph"><p>Libu2f-host provide a C library and command-line tool that implements
the host-side of the U2F protocol.  There are APIs to talk to a U2F
device and perform the U2F Register and U2F Authenticate operations.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_license">License</h2>
<div class="sectionbody">
<div class="paragraph"><p>The project is licensed under the GPLv3+ license.  See the file
COPYING for exact wording.  If you have a desire to use this package
under another license, please contact us to discuss the reason.  For
any copyright year range specified as YYYY-ZZZZ in this package note
that the range specifies every single year in that closed interval.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_usage">Usage</h2>
<div class="sectionbody">
<div class="paragraph"><p>The library usage is documented in the API manual, see gtk-doc/html/
after you built with ./configure --enable-gtk-doc.</p></div>
<div class="paragraph"><p>There is a command line utility that is useful for debugging or
testing.  We describe how you could use it here.</p></div>
<div class="paragraph"><p>First get a REGISTER challenge JSON blob somehow.  You could use the
Yubico U2F demo server interactively in a browser (with the U2F
extension disabled), see <a href="http://demo.yubico.com/u2f">http://demo.yubico.com/u2f</a>.  Alternatively,
use the WSAPI.  For example:</p></div>
<div class="literalblock">
<div class="content">
<pre><code>$ curl 'http://demo.yubico.com/wsapi/u2f/enroll?username=jas&amp;password=foo' &gt; foo</code></pre>
</div></div>
<div class="paragraph"><p>For reference, a blob looks like this:</p></div>
<div class="literalblock">
<div class="content">
<pre><code>{"challenge": "6l8aRM6f35hwrramrt7sKt7gDkvTamt2rYrMgMYE9ro", "version": "U2F_V2", "appId": "http://demo.yubico.com/app-identity"}</code></pre>
</div></div>
<div class="paragraph"><p>Then invoke the u2fhost command, like this:</p></div>
<div class="literalblock">
<div class="content">
<pre><code>$ u2f-host -aregister -o http://demo.yubico.com &lt; foo &gt; bar</code></pre>
</div></div>
<div class="paragraph"><p>Your U2F Device should start to blink, and you should touch it to
proceed.  For reference, the output blob is:</p></div>
<div class="literalblock">
<div class="content">
<pre><code>{ "registrationData": "BQQOtd__bgnv8V6_T-E4914xE-Pb6ji1YMUoP0LDLDCGtzCHPwbkMLlxlo6C6fawnQ7671o85nSbek9v0m3_fK7fQBLviOeAdzHiknazlys7eXtC9DBraClKAhYO-2SuxHnyFS9Jfk2nNrib1dtJJNcfRJrOBGILWIIlXzSt5xV4VBgwggIbMIIBBaADAgECAgRAxBIlMAsGCSqGSIb3DQEBCzAuMSwwKgYDVQQDEyNZdWJpY28gVTJGIFJvb3QgQ0EgU2VyaWFsIDQ1NzIwMDYzMTAgFw0xNDA4MDEwMDAwMDBaGA8yMDUwMDkwNDAwMDAwMFowKjEoMCYGA1UEAwwfWXViaWNvIFUyRiBFRSBTZXJpYWwgMTA4NjU5MTUyNTBZMBMGByqGSM49AgEGCCqGSM49AwEHA0IABK2iSVV7KGNEdPE-oHGvobNnHVw6ZZ6vB3jNIYB1C4t32OucHzMweHqM5CAMSMDHtfp1vuJYaiQSk7jb6M48WtejEjAQMA4GCisGAQQBgsQKAQEEADALBgkqhkiG9w0BAQsDggEBAVg0BoEHEEp4LJLYPYFACRGS8WZiXkCA8crYLgGnzvfKXwPwyKJlUzYxxv5xoRrl5zjkIUXhZ4mnHZVsnj9EY_VGDuRRzKX7YtxTZpFZn7ej3abjLhckTkkQ_AhUkmP7VuK2AWLgYsS8ejGUqughBsKvh_84uxTAEr5BS-OGg2yi7UIjd8W0nOCc6EN8d_8wCiPOjt2Y_-TKpLLTXKszk4UnWNzRdxBThmBBprJBZbF1VyVRvJm5yRLBpth3G8KMvrt4Nu3Ecoj_Q154IJpWe1Dp1upDFLOG9nWCRQk25Y264k9BDISfqs-wHvUjIo2iDnKl5UVoauTWaT7M6KuEwl4wRAIgU5qU72pCVD-bq68tETIKZ8aw7FRKviPVyFZc5Q8BlC0CICTc7_QuTWZFHwxGIotQO639WIllrPf1QqtvHCyzzKg_", "clientData": "eyAiY2hhbGxlbmdlIjogIjZsOGFSTTZmMzVod3JyYW1ydDdzS3Q3Z0RrdlRhbXQycllyTWdNWUU5cm8iLCAib3JpZ2luIjogImh0dHA6XC9cL2RlbW8ueXViaWNvLmNvbSIsICJ0eXAiOiAibmF2aWdhdG9yLmlkLmZpbmlzaEVucm9sbG1lbnQiIH0=" }</code></pre>
</div></div>
<div class="paragraph"><p>Then finish the U2F registration against the server:</p></div>
<div class="literalblock">
<div class="content">
<pre><code>$ curl http://demo.yubico.com/wsapi/u2f/bind -d "username=jas&amp;password=foo&amp;data=`cat bar`"</code></pre>
</div></div>
<div class="paragraph"><p>The output from that web service is JSON with some information.</p></div>
<div class="literalblock">
<div class="content">
<pre><code>{"username": "jas", "origin": "http://demo.yubico.com", "attest_cert": "-----BEGIN CERTIFICATE-----\nMIICGzCCAQWgAwIBAgIEQMQSJTALBgkqhkiG9w0BAQswLjEsMCoGA1UEAxMjWXVi\naWNvIFUyRiBSb290IENBIFNlcmlhbCA0NTcyMDA2MzEwIBcNMTQwODAxMDAwMDAw\nWhgPMjA1MDA5MDQwMDAwMDBaMCoxKDAmBgNVBAMMH1l1YmljbyBVMkYgRUUgU2Vy\naWFsIDEwODY1OTE1MjUwWTATBgcqhkjOPQIBBggqhkjOPQMBBwNCAAStoklVeyhj\nRHTxPqBxr6GzZx1cOmWerwd4zSGAdQuLd9jrnB8zMHh6jOQgDEjAx7X6db7iWGok\nEpO42+jOPFrXoxIwEDAOBgorBgEEAYLECgEBBAAwCwYJKoZIhvcNAQELA4IBAQFY\nNAaBBxBKeCyS2D2BQAkRkvFmYl5AgPHK2C4Bp873yl8D8MiiZVM2Mcb+caEa5ec4\n5CFF4WeJpx2VbJ4/RGP1Rg7kUcyl+2LcU2aRWZ+3o92m4y4XJE5JEPwIVJJj+1bi\ntgFi4GLEvHoxlKroIQbCr4f/OLsUwBK+QUvjhoNsou1CI3fFtJzgnOhDfHf/MAoj\nzo7dmP/kyqSy01yrM5OFJ1jc0XcQU4ZgQaayQWWxdVclUbyZuckSwabYdxvCjL67\neDbtxHKI/0NeeCCaVntQ6dbqQxSzhvZ1gkUJNuWNuuJPQQyEn6rPsB71IyKNog5y\npeVFaGrk1mk+zOirhMJe\n-----END CERTIFICATE-----\n"}</code></pre>
</div></div>
<div class="paragraph"><p>To authenticate (aka sign) you should acquire a challenge somehow.
Our demo server provides them.</p></div>
<div class="literalblock">
<div class="content">
<pre><code>$ curl 'http://demo.yubico.com/wsapi/u2f/sign?username=jas&amp;password=foo' &gt; foo</code></pre>
</div></div>
<div class="paragraph"><p>For reference the challenge is:</p></div>
<div class="literalblock">
<div class="content">
<pre><code>{"challenge": "Pa3eucFQrH-5c9CAEdGESJiIW9po_Sozs6EfPeYN3nM", "version": "U2F_V2", "keyHandle": "Eu-I54B3MeKSdrOXKzt5e0L0MGtoKUoCFg77ZK7EefIVL0l-Tac2uJvV20kk1x9Ems4EYgtYgiVfNK3nFXhUGA", "appId": "http://demo.yubico.com/app-identity"}</code></pre>
</div></div>
<div class="paragraph"><p>You invoke the u2f-host command as before, again your U2F device
should blink up and wait for touch.</p></div>
<div class="literalblock">
<div class="content">
<pre><code>$ u2f-host -aauthenticate -o http://demo.yubico.com &lt; foo &gt; bar</code></pre>
</div></div>
<div class="paragraph"><p>For reference the response is:</p></div>
<div class="literalblock">
<div class="content">
<pre><code>{ "signatureData": "AQAAAAIwRAIgPIlfE6dsRykM5M_KG88hHjRh2ZdiyMakVUIKG9Q2w9QCIBcQYTOhD-D2McYQ2MK0xvoonqNnA0G_WEGNaHtttX32", "clientData": "eyAiY2hhbGxlbmdlIjogIlBhM2V1Y0ZRckgtNWM5Q0FFZEdFU0ppSVc5cG9fU296czZFZlBlWU4zbk0iLCAib3JpZ2luIjogImh0dHA6XC9cL2RlbW8ueXViaWNvLmNvbSIsICJ0eXAiOiAibmF2aWdhdG9yLmlkLmdldEFzc2VydGlvbiIgfQ==", "challenge": "Eu-I54B3MeKSdrOXKzt5e0L0MGtoKUoCFg77ZK7EefIVL0l-Tac2uJvV20kk1x9Ems4EYgtYgiVfNK3nFXhUGA" }</code></pre>
</div></div>
<div class="paragraph"><p>To use our demo server to verify it, you may use this call:</p></div>
<div class="literalblock">
<div class="content">
<pre><code>$ curl http://demo.yubico.com/wsapi/u2f/verify -d "username=jas&amp;password=foo&amp;data=`cat bar`"</code></pre>
</div></div>
<div class="paragraph"><p>On success, the output contains a counter and whether touch was asserted:</p></div>
<div class="literalblock">
<div class="content">
<pre><code>{"touch": "\u0001", "counter": 2}</code></pre>
</div></div>
<div class="paragraph"><p>That&#8217;s it!</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_building">Building</h2>
<div class="sectionbody">
<div class="paragraph"><p>Pkg-config simplify finding other dependencies, see:
<a href="http://www.freedesktop.org/wiki/Software/pkg-config">http://www.freedesktop.org/wiki/Software/pkg-config</a></p></div>
<div class="literalblock">
<div class="content">
<pre><code>Debian:           apt-get install pkg-config</code></pre>
</div></div>
<div class="paragraph"><p>The JSON library is needed, see:
<a href="https://github.com/json-c/json-c/wiki">https://github.com/json-c/json-c/wiki</a></p></div>
<div class="literalblock">
<div class="content">
<pre><code>Debian:           apt-get install libjson0-dev</code></pre>
</div></div>
<div class="paragraph"><p>You will also need HIDAPI installed, see:
<a href="https://github.com/signal11/hidapi/">https://github.com/signal11/hidapi/</a></p></div>
<div class="literalblock">
<div class="content">
<pre><code>Debian:           apt-get install libhidapi-hidraw0</code></pre>
</div></div>
<div class="paragraph"><p>This project uses autoconf, automake and libtool to achieve
portability and ease of use.  If you downloaded a tarball, build it as
follows.</p></div>
<div class="literalblock">
<div class="content">
<pre><code>  $ ./configure --enable-gtk-doc
  $ make check &amp;&amp; sudo make install</code></pre>
</div></div>
</div>
</div>
<div class="sect1">
<h2 id="_building_from_git">Building from Git</h2>
<div class="sectionbody">
<div class="paragraph"><p>You may check out the sources using Git with the following command:</p></div>
<div class="literalblock">
<div class="content">
<pre><code>  $ git clone git://github.com/Yubico/libu2f-host.git</code></pre>
</div></div>
<div class="paragraph"><p>This will create a directory <em>libu2f-host</em>.  Enter the directory:</p></div>
<div class="literalblock">
<div class="content">
<pre><code>  $ cd libu2f-host</code></pre>
</div></div>
<div class="paragraph"><p>Autoconf, automake and libtool must be installed.  Help2man is used to
generate the manpages.</p></div>
<div class="paragraph"><p>Generate the build system using:</p></div>
<div class="literalblock">
<div class="content">
<pre><code>  $ autoreconf --install</code></pre>
</div></div>
<div class="paragraph"><p>Then build as usual, see above under "Building".</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_portability">Portability</h2>
<div class="sectionbody">
<div class="paragraph"><p>The main development platform is Debian GNU/Linux and it should be
well supported.  Windows and Mac OS X are important platforms and we
support them fully as well.</p></div>
<div class="paragraph"><p>Building Mac binaries can be done using macosx.mk.  The resulting
binaries have been tested successfully on Mac OS X 10.7 and 10.9.</p></div>
<div class="literalblock">
<div class="content">
<pre><code>  $ make -f macosx.mk VERSION=0.0</code></pre>
</div></div>
<div class="paragraph"><p>Building Windows binaries can be done using windows.mk.  The resulting
binaries have been tested successfully on Windows 7 Pro 32-bit.</p></div>
<div class="literalblock">
<div class="content">
<pre><code>  $ make -f windows.mk VERSION=0.0</code></pre>
</div></div>
</div>
</div>
<div class="sect1">
<h2 id="_namespaces">Namespaces</h2>
<div class="sectionbody">
<div class="literalblock">
<div class="content">
<pre><code>Project name: Yubico Universal 2nd Factor (U2F) Host C Library
Short name: libu2f-host
Symbol prefix: u2fh_
Tool: u2f-host
Pkg-config: u2f-host</code></pre>
</div></div>
</div>
</div>

</section>
</div>

<!-- FOOTER  -->
<div id="footer_wrap" class="outer">
<footer class="inner">
<p class="copyright">libu2f-host maintained by <a href="https://github.com/Yubico">Yubico</a></p>
</footer>
</div></body></html>
